<div>
    <!-- <ip-navbar></ip-navbar> -->



    <pre></pre>
</div>

<div class="container">
    <div class="row my-custom-row ">


        <div class="col" >
             <h2>Create KPI</h2>
            <!-- <div class="input-group">
                <label >Departments</label>
                <select  formControlName="kpidepts">
                    <option [ngValue]="1">1</option>
                   
                </select>
            </div> -->

        </div>


        <div class="col-6 ">
            <div class="p-3  bg-light " style="outline: auto ;">
                <form [formGroup]="kpi" (ngSubmit)="create()">
                    <label >Title</label>
                    <input type="text" placeholder="kpi title" formControlName="title">
                    <br><br>
                    <!-- <input type="text" placeholder="kpi description" formControlName="kpiDesc"> -->
                    <label >KPI Goal</label>
                    <textarea class="input" name="kpidesc" id="kpidesc" cols="30" rows="5" placeholder="kpi goal" formControlName="goalDescription" style="height: 50px ;"></textarea>
                    <br><br>
                    <div class="input-group">
                        <label >Departments</label>
                        <select  formControlName="departmentId" >
                            <option  *ngFor="let res of deptarr" [value]="res.id">{{res.name}}</option>
     
                        </select>
                    </div>

                    <br><br>
                    <div class="input-group">
                        <label >Type</label>
                        <select  formControlName="type" >
                            <option *ngFor="let res of kpitype" [value]="res._id">{{res.type}}</option>
     
                        </select>
                    </div>


                    <br><br>
                    <div class="input-group">
                        <label >Category</label>
                        <select  formControlName="category" >
                            <option  *ngFor="let res of kpicategories" [value]="res._id">{{res.category}}</option>
     
                        </select>
                    </div>

                    <br><br>
                    <div class="input-group">
                        <label >Perspective</label>
                        <select  formControlName="perspective" >
                            <option  *ngFor="let res of perspectives" [value]="res._id">{{res.perspective}}</option>
     
                        </select>
                    </div>

                    <br><br>
                    <div class="input-group">
                        <label >Direction Of Goodness</label>
                        <select  formControlName="directionOfGoodness" >
                            <option  *ngFor="let res of directionofgoodness" [value]="res">{{res}}</option>
     
                        </select>
                    </div>




                    <br><br>
                    <div class="input-group">
                        <label >Data Capture Frequency</label>
                        <select  formControlName="dataCaptureFrequency" #datacap (change)="t1($event)"  >
                            <option  *ngFor="let res of datacaparr" [value]="res._id">{{res.value}}</option>
                             
                           
                        </select>
                    </div>
                    <br><br>
                    <div class="input-group">
                        <label >Data Review Frequency</label>
                        <select  formControlName="reviewFrequency" >
                            <option  *ngFor="let res of filtrevfre" [value]="res._id">{{res.value}}</option>
                             
                           
                        </select>
                    </div>
                    <br><br>


                    <label>Select Month</label>

                    <ng-select [items]="months" bindLabel="name" bindValue="id" placeholder="Select Month"appendTo="body"
                    [multiple]="true" [(ngModel)]="selected" [ngModelOptions]="{standalone: true}"
                    (add)="addMonths()"  style="margin-left:40px; width: 400px; " 
                    >
                    </ng-select>
                    <!-- ----- -->
                    <div formArrayName="captureData" *ngFor="let data of dataCaptured.controls; let i=index">
                        <!-- The repeated alias template -->
                        <div class="input-group mt-5" formGroupName="{{i}}">
                        <h5>{{months[selected[i]-1].name}}</h5> &nbsp;
                        
                        
                        
                        target:
                        <input id="{{'target'+ i }}" type="number" formControlName='target' class="form-control mt-2">  
                        <!-- class="form-control mt-2" -->
                        lower:
                        <input id="{{'lower'+ i }}" type="number" formControlName='lower' class="form-control mt-2" >
                        Upper:
                        <input id="{{'upper'+ i }}" type="number" formControlName='upper' class="form-control mt-2">
                        <button class="btn btn-danger" (click)="removeData(i)">Remove</button>
                        </div>
                        </div>
                        
                        
                        
                        
                    
                    



                    <button class="btn btn-primary" [disabled]="!this.kpi.valid">Submit</button>
                    <!-- <button (click)="getFiltDataRev(5)">Data Rev</button> -->
                </form>

            </div>
        </div>


        
       
        <div class="col">

        </div>

    </div>
</div>